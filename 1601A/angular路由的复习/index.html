<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    .active{
        background: red;
    }
    </style>
</head>
<body ng-controller="main">
    {{ msg }}
    <a href="#!/publicview/1" ng-class="{active:currentName==='publicview'&&param==='1' }">router1</a>
    <a href="#!/publicview/2" ng-class="{active:currentName==='publicview'&&param==='2' }">router2</a>
    <a href="#!/publicview/3" ng-class="{active:currentName==='publicview'&&param==='3' }">router3</a>
    <ui-view></ui-view>
</body>
<script src="./angular.js"></script>
<script src="./angular-ui-router.js"></script>
<script src="./stateEvents.js"></script>
</html>
<script>
    angular.module('app',['ui.router','ui.router.state.events'])
            .config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){

                    $stateProvider.state('publicview',{
                        url:'/publicview/:param',
                        template:'<div> {{ value }} </div>',
                        controller:['$scope','$stateParams',function($scope,$stateParams){
                            $scope.value = $stateParams.param
                        }]
                    })
            }])
            .run(['$rootScope',function($rootScope){
                $rootScope.$on('$stateChangeSuccess',function(event,newRoute,param){
                    $rootScope.currentName = newRoute.name; // 保存路由名称
                    $rootScope.param = param.param; // 保存路由参数
                    // 只有 路由名称相等 并且参数相等 那么这个路由才能高亮 ！！！
                    console.log('success',param.param)
                })
            }])
            .controller('main',['$scope',function($scope){
                $scope.msg = 'Hello World!';
            }]) 
            
</script>