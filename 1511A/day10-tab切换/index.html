<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style lang="">
        .active{
            background: red;
        }
    </style>
</head>
<body>
    <div id="app">
        <cont :content="array"></cont>
        <div :style="{display:'flex'}">
            <btn  v-for="(item , index) in list"  :class="{active:currentIndex===index}" :item="item" :style="{flex:1}" :fn="changeArray" :ind="index"></btn>
        </div>
    </div>
</body>
<script src="./vue.js"></script>
<script src="./axios.js"></script>
</html>
<script>

    const content = {
        props:{
            content:{
                type:[Array],
                require:true
            }
        },
        template:`
            <div >
                <div v-for="item in content" :style="{display:'flex'}">
                    <div :style="{flex:1}" v-text="item.name"></div><div :style="{flex:1}" v-text="item.price"></div>
                </div>
            </div>
        `
    }

    const button = {  // 局部组件
        props:{
            item:{
                type:[String,Object], // props 验证
                require:true // 必须传 name 参数 否则报错
            },
            fn:{
                type:[Function]
            },
            ind:{
                type:[Number]
            }
        },
        template:'<button v-text="item.type" @click="click"></button>',
        methods:{
            click(){  // 子组件 向 父组件传值
                this.fn(this.item.value,this.ind);
            }
        }
    }


Vue.prototype.$http = axios;

    new Vue({
        el:'#app',
        data(){
            return {
                list:null,
                array:[],
                currentIndex:0
            }
        },
        created(){
            this.$http({
                url:'./json.json',
                method:'GET'
            })
            .then(( result )=>{
                this.list = result.data;
                this.array = this.list[this.currentIndex].value;
            },( error )=>{
                throw error;
            })
        },
        methods:{
            changeArray(newVal,index){
                this.array = newVal;
                this.currentIndex =index;
            }
        },
        components:{
            btn:button,cont:content
        }
    })


    // 组件的构成 

    /*
    1 模版 template
    2 数据 data
    3 方法 methods
    4 父组件数据 props
    5 子组件 components
    6 声明周期函数11 个
    7 局部过滤器
    8 局部路由钩子
    9 局部指令
    10 过渡动画钩子
    */

    // 父组件 子组件的 通信
    // 回调函数 ✔
    // 自定义事件✖
    // bus✖
    // vuex ✖
    
</script>