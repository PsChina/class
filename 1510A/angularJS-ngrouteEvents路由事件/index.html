<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
    .active{
        background: orange;
    }
    </style>
    <title>Document</title>
</head>
<body ng-controller="main">
    <a href="#!/home" ng-class=" path == '/home' ? 'active' : '' ">home</a>
    <a href="#!/shoe" ng-class=" path == '/shoe' ? 'active' : '' ">shoe</a>
    <a href="#!/phone" ng-class=" path == '/phone' ? 'active' : '' ">phone</a>
    <ng-view></ng-view>
</body>
<script src="./angular.js"></script>
<script src="./angular-route.js"></script>
</html>
<script>
    angular.module('app',['ngRoute'])
           .controller('main',['$scope',function($scope){
                $scope.msg = 'Hello world!'
           }])
           .config(['$routeProvider',function($routeProvider){
            $routeProvider.when('/home',{
                template:'<div ng-click="update()">home {{home.a}}</div>',
                controller:['$scope',function($scope){
                    this.a='a'
                    var _this = this;
                    $scope.update = function(){
                        _this.a = 'aaa'
                    }
                }],
                reloadOnSearch:false,
                controllerAs:'home'
            }).when('/shoe',{
                template:'<div>shoes {{shoe.b}}</div>',
                controller:[function(){
                    this.b='b'
                }],
                reloadOnSearch:false,
                controllerAs:'shoe'
            }).when('/phone',{
                templateUrl:'<div>phone {{phone.c}}</div>',
                controller:[function(){
                    this.c='c'
                }],
                reloadOnSearch:false,
                controllerAs:'phone'
            })

           }])
           .run(['$rootScope',function($rootScope){
                // 实例
                // $scope 下边有 $applay 全局脏检查  $on  $watch $digest 局部脏检查 $last $emit $broadcast

                $rootScope.$on('$routeChangeStart',function(event,currentRoute,previousRoute){//通过 $on方法来监听自定义事件
                  
                }) 
                $rootScope.$on('$routeChangeSuccess',function(event,currentRoute,previousRoute){
                    console.log(currentRoute.$$route.originalPath)
                    $rootScope.path = currentRoute.$$route.originalPath; 
                }) 
                $rootScope.$on('$routeChangeError',function(event,currentRoute,previousRoute,error){
                    console.log('路由跳转失败')
                }) 
                $rootScope.$on('$routeUpdate',function(currentRoute){
                    console.log('路由更新')
                    console.log('123',arguments)
                })
           }])

</script>